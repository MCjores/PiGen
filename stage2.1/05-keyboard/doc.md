# Экранная клавиатура
За основу экранной клавиатуры в данном дистрибутиве взят
пакет "onboard". Алгоритм работы клавиатуры следующий: клавиатура
запускается автоматически при входе в систему в свёрнутом режиме
и ожидает от оконных программ запрос на ввод текста. Запрос приходит
через службу специальных возможностей. Для работы этой службы устанвливаются
следующие пакеты:

- at-spi2-core
- libatk-adaptor
- libgail-common
- libglib2.0-bin

## Автозапуск клавиатуры
Для автоматического запуска клавиатуры в свёрнутом режиме при входе
в систему в файл _"/home/pi/.config/openbox/autostart"_ добавлена
строка:
```
onboard &
```

## Добавление кнопки смены языка
Изначально ни один макет клавиатуры "onboard" не содержит клавиши для
смены языка. Выполнять переключение языка с помощью сочетания клавиш
крайне не удобно. Поэтому для смены раскладок клавиатуры назначена клавиша <kbd>⊞ Win</kbd>. Однако стандартный макет клавиатуры не подходит для маленьких экранов. В связи с этим был разработан собственный макет клавиатуры, на основе макета "Phone". Макет представляет собой векторное изображение в формате SVG, в котором фигуры, отвечающие за клавиши, имеют специальные идентификаторы. В итоге в макет "Phone" добавлена клавиша <kbd>⊞ Win</kbd> с изображением глобуса. За макет
отвечают файлы:

- /usr/share/onboard/layouts/Amplituda.onboard
- /usr/share/onboard/layouts/Amplituda-Alpha.svg
- /usr/share/onboard/layouts/Amplituda-Emoji.svg
- /usr/share/onboard/layouts/Amplituda-Numbers.svg
- /usr/share/onboard/layouts/Amplituda-Syms.svg
- /usr/share/onboard/images/globe.svg

## Настройки клавиатуры
Клавиатура хранит настройки в системе "dconf". В данной системе конфигурация
состоит из ключей, сгруппированых по разделам. Ниже приведена таблица настроек клавиатуры:

|            Раздел           |              Ключ             |                   Значение                   |                           Комментарий                            |
| --------------------------- | ----------------------------- | -------------------------------------------- | ---------------------------------------------------------------- |
| org.onboard                 | system-theme-tracking-enabled | false                                        | Отключение автоматической смены темы клавиатуры                  |
| org.onboard                 | layout                        | /usr/share/onboard/layouts/Amplituda.onboard | Установка макета клавиатуры                                      |
| org.onboard                 | theme                         | /usr/share/onboard/themes/Nightshade.theme   | Установка темы клавиатуры                                        |
| org.onboard.auto-show       | enabled                       | true                                         | Автоматическое появлении клавиатуры при выборе текстовых полей   |
| org.onboard.window          | docking-enabled               | true                                         | Закрепление клавиатуры у границы экрана                          |
| org.gnome.desktop.interface | toolkit-accessibility         | true                                         | Включение службы передачи сообщений о необходимости ввода текста |